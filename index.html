<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Portfolio</title>
  
  <!-- Только самые важные preload -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0], j=d.createElement(s);
      j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-58QCTH55');
  </script>
  
  
  <!-- Основные стили -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/sidebar.css">
  
  <!-- Google Fonts с &display=swap -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Palanquin:wght@400;700&family=Lilita+One&display=swap">

  <!-- GLightbox стили -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />

  <!-- Snipcart с отложенной загрузкой -->
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.3.1/default/snipcart.css" media="print" onload="this.media='all'">
</head>

<body>

   <!-- Прелоадер (добавь этот код ПЕРВЫМ в body) -->

<div id="preloader">
    <div class="percentage">0%</div>
</div>


  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-58QCTH55"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  

   <!-- Оберни весь твой существующий контент в этот div -->
    <div id="content">
   

  <!-- Галерея -->
  <main>

<div class="gallery-with-sidebar">
    <!-- Фильтры сбоку -->









   <div class="filter-sidebar">
    <!-- Верхняя часть - лого и фильтры -->
    <div class="sidebar-logo">
        <img src="favicon/web-app-manifest-512x512.png" Qekkel class="sidebar-logo-img">
        <div class="sidebar-logo-text">Qekkel</div>
    </div>
    
    <button class="filter-btn active" data-filter="all">All Works</button>
    <button class="filter-btn" data-filter="characters">Characters</button>
    <button class="filter-btn" data-filter="illustrations">Illustrations</button>
    <button class="filter-btn" data-filter="fanart">Fan Art</button>
    <button class="filter-btn" data-filter="sketches">Sketches</button>
    
    <!-- Нижняя часть - прижата к низу -->
    <div class="sidebar-bottom-section">
        <div class="sidebar-divider"></div>
         <a href="index.html" class="filter-btn">Gallery</a>
        <a href="about.html" class="filter-btn">About</a>
        <a href="store.html" class="filter-btn">Store</a>
    </div>
</div>








    <div id="gallery" class="gallery-section">
      <div class="gallery-container">
<div class="gallery-item" data-category="fanart" data-title="VAMPIRE">
    <a href="images/full/girl-vampire-marceline.gif" class="glightbox">
    <img src="images/optimized/girl-vampire-marceline.gif" alt="Vampire" class="gallery-image" loading="eager" width="600" height="800"> 
  </a>
</div>
<div class="gallery-item" data-category="fanart" data-title="ZORRO">
  <a href="images/full/one-piece-zorro.webp" class="glightbox">
    <img src="images/optimized/one-piece-zorro.webp" alt="Zorro" class="gallery-image">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="TRAVEL">
  <a href="images/full/adventure-girl.webp" class="glightbox">
    <img src="images/optimized/adventure-girl.webp" alt="Travel Adventure Girl" class="gallery-image" fetchpriority="high" loading="eager" width="800" height="1000">
  </a>
</div>
<div class="gallery-item" data-category="sketches" data-title="EMOTION SKETCH">
  <a href="images/full/Sagittarius.webp" class="glightbox">
    <img src="images/optimized/sketch.webp" alt="Emotion Sketch" class="gallery-image">
    </a>
</div>
<div class="gallery-item"  data-category="fanart" data-title="BMO">
  <a href="images/full/bmo.webp" class="glightbox">
    <img src="images/optimized/bmo.webp" alt="BMO Adventure Time" class="gallery-image" loading="eager">
  </a>
</div>
<div class="gallery-item"  data-category="fanart" data-title="PRINCESS BUBBLEGUM">
  <a href="images/full/princess-bubblegum-adventure-time.webp" class="glightbox">
    <img src="images/optimized/princess-bubblegum-adventure-time.webp" alt="Princess Bubblegum" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item"  data-category="fanart"  data-title="FIN'S ROOM">
  <a href="images/full/adventure-time.gif" class="glightbox">
    <img src="images/optimized/adventure-time.gif" alt="Finn's Room Adventure Time" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="MUSHROOM GIRL">
  <a href="images/full/mushrooms-girl.webp" class="glightbox">
    <img src="images/optimized/mushrooms-girl.webp" alt="Mushroom Girl" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="BOY">
  <a href="images/full/egor-1.webp" class="glightbox">
    <img src="images/optimized/egor-1.webp" alt="Boy Portrait" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="QUIZ CHARACTER">
  <a href="images/full/quiyzasha-tv.gif" class="glightbox">
    <img src="images/optimized/quiyzasha-tv.gif" alt="Quiz Character" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="GIRL">
  <a href="images/full/cg-girl-design.webp" class="glightbox">
    <img src="images/optimized/cg-girl-design.webp" alt="CG Girl Design" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="TREASURE CHEST">
  <a href="images/full/sunduk.webp" class="glightbox">
    <img src="images/optimized/sunduk.webp" alt="Treasure Chest" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="sketches"  data-title="EMOTION SKETCH">
  <a href="images/full/sketch.webp" class="glightbox">
    <img src="images/optimized/sketch.webp" alt="Emotion Sketch" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="sketches"  data-title="SING STREET">
  <a href="images/full/sing-street.webp" class="glightbox">
    <img src="images/optimized/sing-street.webp" alt="Sing Street" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="VADIM">
  <a href="images/full/vadim.webp" class="glightbox">
    <img src="images/optimized/vadim.webp" alt="Vadim Portrait" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="PIXEL TWILIGHT">
  <a href="images/full/twilight-mix.webp" class="glightbox">
    <img src="images/optimized/twilight-mix.webp" alt="Pixel Twilight" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="CUDDLY CATS">
  <a href="images/full/cuddly-cats.webp" class="glightbox">
    <img src="images/optimized/cuddly-cats.webp" alt="Cuddly Cats" class="gallery-image" loading="lazy">
  </a>
</div>
<div class="gallery-item" data-category="illustrations" data-title="OVER THE GARDEN WALL">
  <a href="images/full/over-the-garden-wall.webp" class="glightbox">
    <img src="images/optimized/over-the-garden-wall.webp" alt="Over The Garden Wall" class="gallery-image" loading="lazy">
  </a>
</div>
      </div>
    </div>

    <!-- Модальное окно -->
    <div id="modal" class="modal">
      <span class="close">&times;</span>
      <img class="modal-content" id="modal-image">
      <div id="caption"></div>
    </div>
  </main>

  <div id="checkout-btn-container" style="display: none;">
    <button>Proceed to Checkout</button>
  </div>

  <!-- Футер -->
  <footer>
    <p>© 2025 Olga Boiko</p>
  </footer>

      </div>

  <!-- ОПТИМИЗИРОВАННАЯ ЗАГРУЗКА СКРИПТОВ -->
  <!-- Только самые важные скрипты -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/imagesloaded/4.1.4/imagesloaded.pkgd.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js" defer></script>

  <script>
    // Упрощенная инициализация
    function initGallery() {
      // Показываем галерею сразу
      const gallery = document.querySelector('.gallery-container');
      if (gallery) gallery.style.opacity = '1';
      
      // GLightbox
      if (typeof GLightbox !== 'undefined') {
        GLightbox();
      }
      
      // Masonry
      if (typeof Masonry !== 'undefined' && typeof imagesLoaded !== 'undefined') {
        imagesLoaded('.gallery-container', function() {
          new Masonry('.gallery-container', {
            itemSelector: '.gallery-item',
            columnWidth: '.gallery-item',
            percentPosition: true
          });
        });
      }
    }

    // Запуск после загрузки страницы
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initGallery);
    } else {
      initGallery();
    }
  </script>

<script>
// Фильтрация галереи
document.addEventListener('DOMContentLoaded', function() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const galleryItems = document.querySelectorAll('.gallery-item');
    
    filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            filterBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            const filter = this.getAttribute('data-filter');
            
            galleryItems.forEach(item => {
                const category = item.getAttribute('data-category');
                item.style.display = (filter === 'all' || category === filter) ? 'block' : 'none';
            });
            
            // Переинициализируем Masonry после фильтрации
            setTimeout(() => {
                if (typeof Masonry !== 'undefined') {
                    imagesLoaded('.gallery-container', function() {
                        new Masonry('.gallery-container', {
                            itemSelector: '.gallery-item:not(.hidden)',
                            columnWidth: '.gallery-item',
                            percentPosition: true
                        });
                    });
                }
            }, 300);
        });
    });
});
</script>

<!-- Остальные скрипты -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/imagesloaded/5.2.0/imagesloaded.pkgd.min.js"></script>
<script src="script.js"></script>
<script src="script.js" defer></script>
<script src="cart-display.js" defer></script>

<!-- Скрипт прелоадера (оставляем последним) -->

<script>
    let progress = 0;
    const preloader = document.getElementById('preloader');
    const percentageElement = document.querySelector('.percentage');
    const content = document.getElementById('content'); // Добавляем эту строку

    document.body.classList.add('preloader-active');

    function updateProgress() {
        // Базовая скорость + ускорение в конце
        let increment = progress < 70 ? 10 : 20;
        progress += increment + Math.random() * 15;
        
        if (progress > 100) progress = 100;
        percentageElement.textContent = Math.floor(progress) + '%';
        
        if (progress < 100) {
            setTimeout(updateProgress, progress < 50 ? 150 : 100);
        } else {
            setTimeout(() => {
                // Плавно убираем прелоадер
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.style.display = 'none';
                    // Плавно показываем контент
                    content.classList.add('content-visible');
                    document.body.classList.remove('preloader-active');
                }, 500);
            }, 300);
        }
    }

    window.addEventListener('load', updateProgress);
</script>
 <script>
    // Функция фильтрации галереи
    function filterGallery(category) {
        const galleryItems = document.querySelectorAll('.gallery-item');
        const filterTitle = document.querySelector('.filter-title');
        
        // Обновляем заголовок
        filterTitle.textContent = category.toUpperCase();
        
        // Показываем/скрываем элементы
        galleryItems.forEach(item => {
            if (category === 'all' || item.dataset.category === category) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
        
        // Обновляем активную кнопку
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.textContent.toLowerCase() === category) {
                btn.classList.add('active');
            }
        });
    }

    // Назначаем обработчики на кнопки
    document.addEventListener('DOMContentLoaded', function() {
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                const category = this.textContent.toLowerCase().replace(' ', '-');
                filterGallery(category);
            });
        });
        
        // По умолчанию показываем "All Works"
        filterGallery('all');
    });
    </script>
</body>